# API Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ - Ğ£Ğ¼Ğ½Ñ‹Ğµ Ğ’Ğ¾Ñ€Ğ¾Ñ‚Ğ° Ñ CC1101

## ĞĞ±Ğ·Ğ¾Ñ€
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°Ğ¼Ğ¸ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ CC1101 Ñ€Ğ°Ğ´Ğ¸Ğ¾Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ RadioLib.

---

## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ CC1101

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñƒ
```
GET /api/frequency
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "frequency": 433.92,
  "rssi": -85
}
```

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñƒ
```
POST /api/frequency/set
Content-Type: application/json

{
  "frequency": 433.92
}
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `frequency` (float): Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ² ĞœĞ“Ñ† (Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½: 300-928 ĞœĞ“Ñ†)

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true,
  "frequency": 433.92
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ CC1101
```
GET /api/cc1101/config
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "frequency": 433.92,
  "rssi": -85,
  "status": "active"
}
```

---

## ğŸ”‘ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ»ÑÑ‡ĞµĞ¹
```
GET /api/keys
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
[
  {
    "code": 123456,
    "name": "ĞšĞ»ÑÑ‡ 0x1E240",
    "enabled": true,
    "rawData": "1e2403ff",
    "rssi": -75,
    "frequency": 433.92,
    "protocol": "RAW/Custom",
    "modulation": "ASK/OOK",
    "timestamp": 1234567890
  }
]
```

### ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ
```
POST /api/keys/learn
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true,
  "message": "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ° Ğ±Ñ€ĞµĞ»ĞºĞµ"
}
```

### ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ
```
POST /api/keys/stop
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true,
  "message": "Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½"
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ
```
GET /api/keys/status
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "learningMode": false,
  "keyCount": 5
}
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ»ÑÑ‡
```
POST /api/keys/delete
Content-Type: application/json

{
  "code": 123456
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true
}
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞºĞ»ÑÑ‡Ğ°
```
PUT /api/keys/update
Content-Type: application/json

{
  "code": 123456,
  "name": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ¸Ğ¼Ñ",
  "enabled": true
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true
}
```

---

## ğŸšª Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°Ğ¼Ğ¸

### ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°
```
POST /api/gate/trigger
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true
}
```

---

## ğŸ“± Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°Ğ¼Ğ¸

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ²
```
GET /api/phones
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
[
  {
    "id": "+79991234567",
    "number": "+79991234567",
    "smsEnabled": true,
    "callEnabled": true
  }
]
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
```
POST /api/phones
Content-Type: application/json

{
  "number": "+79991234567",
  "smsEnabled": true,
  "callEnabled": true
}
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
```
PUT /api/phones/update
Content-Type: application/json

{
  "id": "+79991234567",
  "smsEnabled": true,
  "callEnabled": false
}
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
```
POST /api/phones/delete
Content-Type: application/json

{
  "id": "+79991234567"
}
```

---

## ğŸ“¡ WiFi

### Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞµÑ‚Ğ¸
```
GET /api/wifi/scan
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
[
  {
    "ssid": "MyNetwork",
    "rssi": -65,
    "encryption": 1
  }
]
```

### ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº ÑĞµÑ‚Ğ¸
```
POST /api/wifi/connect
Content-Type: application/json

{
  "ssid": "MyNetwork",
  "password": "password123"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "success": true,
  "ip": "192.168.1.100",
  "ssid": "MyNetwork",
  "rssi": -65
}
```

---

## ğŸ”Œ WebSocket Events

### ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
```
ws://192.168.4.1:81
```

### Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

#### Ğ›Ğ¾Ğ³ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
```json
{
  "event": "log",
  "data": {
    "message": "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°",
    "type": "success"
  }
}
```

#### ĞšĞ»ÑÑ‡ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚
```json
{
  "event": "key_received",
  "data": {
    "code": 123456,
    "rawData": "1e2403ff",
    "rssi": -75,
    "snr": 10.5,
    "frequency": 433.92,
    "protocol": "RAW/Custom",
    "modulation": "ASK/OOK",
    "timestamp": 1234567890
  }
}
```

#### ĞšĞ»ÑÑ‡ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½
```json
{
  "event": "key_added",
  "data": {
    "code": 123456,
    "name": "ĞšĞ»ÑÑ‡ 0x1E240",
    "enabled": true,
    "rawData": "1e2403ff",
    "rssi": -75,
    "frequency": 433.92,
    "protocol": "RAW/Custom",
    "modulation": "ASK/OOK",
    "timestamp": 1234567890
  }
}
```

#### Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ WiFi
```json
{
  "event": "wifi_status",
  "data": {
    "status": "connected",
    "ssid": "MyNetwork",
    "rssi": -65,
    "ip": "192.168.1.100"
  }
}
```

---

## ğŸ“Š Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¾Ğ¼ ĞºĞ»ÑÑ‡Ğµ Ğ² Serial

ĞŸÑ€Ğ¸ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¸ RF ĞºĞ»ÑÑ‡Ğ° Ğ² Serial Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ĞĞ‘ĞĞĞ Ğ£Ğ–Ğ•Ğ RF ĞšĞ›Ğ®Ğ§ (CC1101)                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ĞšĞ¾Ğ´ (uint32):     123456                                   â•‘
â•‘ ĞšĞ¾Ğ´ (HEX):        0x1E240                                  â•‘
â•‘ Raw Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:       1e2403ff                                 â•‘
â•‘ Ğ”Ğ»Ğ¸Ğ½Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:     4                                        â•‘
â•‘ ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»:         RAW/Custom                               â•‘
â•‘ ĞœĞ¾Ğ´ÑƒĞ»ÑÑ†Ğ¸Ñ:        ASK/OOK                                  â•‘
â•‘ Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°:          433.92 ĞœĞ“Ñ†                               â•‘
â•‘ RSSI:             -75 dBm                                  â•‘
â•‘ SNR:              10.50 dB                                 â•‘
â•‘ Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°: 0.15 ĞºĞ“Ñ†                                â•‘
â•‘ Ğ’Ñ€ĞµĞ¼Ñ:            1234567890 Ğ¼Ñ                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”§ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ CC1101

### ĞŸĞ¸Ğ½Ñ‹ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ ESP32):
- **CS (CSN)**: GPIO5
- **GDO0**: GPIO4
- **GDO2**: GPIO2
- **SCK**: GPIO18 (SPI)
- **MISO**: GPIO19 (SPI)
- **MOSI**: GPIO23 (SPI)

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑÑ†Ğ¸Ğ¸:
- **ĞœĞ¾Ğ´ÑƒĞ»ÑÑ†Ğ¸Ñ**: ASK/OOK
- **Ğ‘Ğ¸Ñ‚Ñ€ĞµĞ¹Ñ‚**: 3.79 kbps
- **Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ° Ğ¿Ğ¾Ğ»Ğ¾ÑÑ‹ RX**: 58 ĞºĞ“Ñ†
- **Ğ”ĞµĞ²Ğ¸Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹**: 5.2 ĞºĞ“Ñ†
- **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ğ°Ñ Ğ¼Ğ¾Ñ‰Ğ½Ğ¾ÑÑ‚ÑŒ**: 10 dBm

### ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹:
- 300-348 ĞœĞ“Ñ†
- 387-464 ĞœĞ“Ñ†
- 779-928 ĞœĞ“Ñ†

**Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°**: 433.92 ĞœĞ“Ñ†

